# Инструкция по установке OpenWrt на Tenda RX12L Pro

## Варианты установки

### Вариант 1: Через Web-интерфейс (рекомендуется для рабочих роутеров)

1. Скачать прошивку `openwrt-*-tenda_rx12l_pro-squashfs-sysupgrade.bin`
2. Зайти в web-интерфейс Tenda (обычно 192.168.0.1)
3. Найти раздел "Обновление прошивки" (Firmware Upgrade)
4. Загрузить файл прошивки
5. Дождаться перезагрузки

### Вариант 2: Через TFTP (если роутер не загружается)

1. Настроить TFTP сервер с файлом `openwrt.bin`
2. Подключить ПК к роутеру через Ethernet
3. Зажать кнопку RESET и включить питание
4. Отпустить кнопку после 3-5 секунд
5. Роутер загрузит прошивку по TFTP

### Вариант 3: Через UART (для кирпича)

#### Требуется:
- USB-UART адаптер (3.3V TTL)
- Провода: RX, TX, GND
- mtk_uartboot (из репозитория MediaTek)

#### Подключение:
```
Роутер -> USB-UART
TX      -> RX
RX      -> TX
GND     -> GND
```

#### Процесс:
1. Подключиться к UART (115200 8N1)
2. Запустить mtk_uartboot:
```bash
mtk_uartboot -p /dev/ttyUSB0 -b mt7981-ram-ddr3-bl2.bin
```

3. Загрузить initramfs:
```bash
mtk_uartboot -p /dev/ttyUSB0 -k openwrt-initramfs.bin
```

4. В busybox:
```bash
# Скопировать sysupgrade в RAM
wget http://192.168.1.2/openwrt.bin -O /tmp/firmware.bin

# Прошить
sysupgrade /tmp/firmware.bin
```

## Восстановление стоковой прошивки

### Через Web:
1. Скачать стоковую прошивку с tendacn.com
2. Прошить через web-интерфейс OpenWrt

### Через UART (полное восстановление):
1. Загрузить BL2 через UART
2. Загрузить стоковую прошивку
3. Прошить через MTK tools

## Схема разделов (16MB NOR Flash)

| Адрес   | Размер  | Назначение     |
|---------|---------|----------------|
| 0x00000 | 256KB   | BL2 (загрузчик)|
| 0x40000 | 64KB    | ENV            |
| 0x50000 | 128KB   | Factory (MAC)  |
| 0x70000 | 512KB   | FIP (U-Boot)   |
| 0xF0000 | 15MB    | Firmware       |

## Важно знать

- **WiFi**: После первой загрузки нужно настроить WiFi вручную
- **Пароль**: root (по умолчанию, без пароля)
- **IP**: 192.168.1.1
- **VLAN**: Поддерживается через switch config
- **Mesh**: 802.11s работает

## Troubleshooting

### Роутер не загружается после прошивки
1. Подключиться к UART
2. Проверить вывод загрузки
3. Если зависает на "Loading", попробовать другую прошивку

### Нет доступа к web
1. Проверить подключение (кабель в LAN порт)
2. Сбросить настройки: reset кнопка 10 секунд
3. Проверить IP адрес: 192.168.1.1

### WiFi не работает
1. Проверить настройки в /etc/config/wireless
2. Включить WiFi: `wifi config`
3. Проверить каналы (некоторые страны ограничены)
